pico-8 cartridge // http://www.pico-8.com
version 36
__lua__
--globals
test = 0
--player
player = {
 landed = true,
 x = 0,
 y = 48,
 dy = 0,
 acc = 0.15,
 sprite = 16,
 
 jump = function(player)
  player.dy = -2.5
  player.landed = false
 end,
 
 
 die = function(player)
  sfx(0)
  run()
 end,
 
 move = function(player)
  player.x += player.acc
 end,
 
 yset = function(player)
  player.y += player.dy
  player.dy += 0.2
 end,
 
 dyset = function(player, set)
  player.dy = set
 end
}
--update function
function _update60()
 grid_x = flr(player.x)
 grid_y = flr(player.y/8)
 if (btn(2)) then 
  if (mget(grid_x, grid_y+1) == 2) then
   player:jump()
  end
  
  if ((mget(grid_x, grid_y + 1) == 4 or mget(grid_x + 1, grid_y + 1) == 4 or mget(grid_x, grid_y) == 4) and player.landed) then
   player:orb()
  end
 end
 
 if (mget(grid_x+1, grid_y) == 3 or mget(grid_x+1, grid_y) == 2 or mget(grid_x, grid_y) == 2) then
  player:die()
 end
 
 if ((mget(grid_x, grid_y+1) == 2 or mget(grid_x+1, grid_y+1) == 2) and not btn(2)) then
  player:dyset(0)
 end
 
 if (mget(grid_x, grid_y+1) == 2) then
  player.y = grid_y * 8 
 end
 
 if (mget(grid_x+1, grid_y) == 5 or mget(grid_x, grid_y) == 5) then
  player:pad()
  
 end
 
 if (not btn(2)) then
  player.landed = true
 end
 
 player:move()
 player:yset()
end
--draw function
function _draw()
 cls(2)
 map(0, 0, 0, 0, 128, 32)
 spr(player.sprite, player.x * 8, player.y)
 camera(player.x * 8 - 24, player.y - 64)
 print()
end
 
__gfx__
00000000000ff0008888888800088000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000f66f008888888800088000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070000ffff008888888800088000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700000ffff008888888800888800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770000f0ff0f08888888808888880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000ff0008888888888888880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000ff0008888888888888888000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000f00f008888888888888888000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11111111000ff0000000000000000000000000000707070700000000000000000000000000000000000000000000000000000000000000000000000000000000
1bbbbbb100f66f000000000000000000000000000070707000000000000000000000000000000000000000000000000000000000000000000000000000000000
1b6666b100ffff0f0000000000000000000000000707070700000000000000000000000000000000000000000000000000000000000000000000000000000000
1b6226b100fffff00000000000000000000000000070707000000000000000000000000000000000000000000000000000000000000000000000000000000000
1b6226b10f0ff0000000000000000000000000000000001600000000000000000000000000000000000000000000000000000000000000000000000000000000
1b6666b1000ff0000000000000000000000000000000001600000000000000000000000000000000000000000000000000000000000000000000000000000000
1bbbbbb100ffff000000000000000000000000000000001100000000000000000000000000000000000000000000000000000000000000000000000000000000
111111110f000f000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000100000000000000000000000000000000000101010100000000000000000000000000000000000000000000000030303000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000010001000001000101000001010000000000000000000000002020202000000000000000000000002020202000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000202020000000000000000000000000000000000000000020000000000000200000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000003030000000000000000000000000003000000000002000000000000000200000000000000000000000000000000000002020202000000001502000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
