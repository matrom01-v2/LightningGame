pico-8 cartridge // http://www.pico-8.com
version 38
__lua__
--globals
test = 0
level = 1
map_x=0
building_x=0
skyscrp_x=0
map_speed=1
bldng_speed=0.3
skyscrp_speed=0.1
//deaths = 0
-->8
--player
player = {
 landed = true,
 x = 0,
 y = 48,
 dy = 0,
 acc = 0.16,
 
 jump = function(player)
  player.dy = -2.7
  player.landed = false
 end,
 
 die = function(player)
  sfx(0)
  //run()
	 player:change_level()
 end,
 
 change_level = function(player)
		if (level == 1) then
		 player.x = 0
		 player.y = 48
		end
		if (level == 2) then
		 player.x = 0
		 player.y = 96
		end
	end,
	 
 move = function(player)
  player.x += player.acc
 end,
 
 yset = function(player)
  player.y += player.dy
  player.dy += 0.2
 end,
 
 dyset = function(player, set)
  player.dy = set
 end
}
-->8
--update function
function _update60()

	map_x-=map_speed
 if map_x<-254 then 
 	map_x=0
 end
 
 building_x-=bldng_speed
  if building_x<-254 then 
    	building_x=0
  end

    --skyscrap
  skyscrp_x-=skyscrp_speed
  if skyscrp_x<-254 then 
   skyscrp_x=0
  end
 
 
 grid_x = flr(player.x)
 grid_y = flr(player.y/8)
 
 if (btn(2)) then 
  if (mget(grid_x, grid_y+1) == 2) then
   player:jump()
  end
  
  if ((mget(grid_x, grid_y + 1) == 4 or mget(grid_x + 1, grid_y + 1) == 4 or mget(grid_x, grid_y) == 4) and player.landed) then
   player:orb()
  end
 end
 
 if (mget(grid_x+1, grid_y) == 3 or mget(grid_x+1, grid_y) == 2 or mget(grid_x, grid_y) == 2) then
  player:die()
 end
 
 if ((mget(grid_x, grid_y+1) == 2 or mget(grid_x+1, grid_y+1) == 2) and not btn(2)) then
  player:dyset(0)
 end
 
 if (mget(grid_x, grid_y+1) == 2) then
  player.y = grid_y * 8 
 end
 
 if (mget(grid_x+1, grid_y) == 5 or mget(grid_x, grid_y) == 5) then
  player:pad()
 end
 
 if (mget(grid_x+1, grid_y) == 4) then
  level+=1
  player:change_level()
 end
 
 
 if (not btn(2)) then
  player.landed = true
 end
 
 player:move()
 player:yset()
end
-->8
--draw function
function _draw()
 cls(1)  
 camera(player.x * 8 - 24, player.y - 64)
 if (level == 1) then
 	map(80,48,skyscrp_x,0,16,16)
  map(80,48,skyscrp_x+128,0,16,16)
  map(72,48,building_x,0,16,16)
  map(72,48,building_x+200,0,16,16)
  map(0, 0, 0, 0, 128, 8)
 end
 if (level == 2) then
 	map(80,48,skyscrp_x,55,16,16)
  map(80,48,skyscrp_x+128,55,16,16)
  map(72,48,building_x,55,16,16)
  map(72,48,building_x+200,55,16,16)
  map(0, 8, 0, 64, 128, 8)
 end
 if (level == 3) then
 	map(0, 16, 0, 48, 128, 8)
 	map(80,48,skyscrp_x,0,16,16)
  map(80,48,skyscrp_x+128,0,16,16)
  map(72,48,building_x,0,16,16)
  map(72,48,building_x+200,0,16,16)
 end
 spr(1, player.x * 8, player.y)
 print("x:"..player.x, player.x * 8 - 24, player.y - 64)
 print("y:"..player.y, player.x * 8 - 24, player.y - 54)
 print("level:"..level, player.x * 8 - 24, player.y - 44)
end
__gfx__
00000000777777771111111109090000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000700000071bbbbbb108000090000500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070070888807bbccccbb08800089000477000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000708bb807cc1771cc90889989000f77770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000708bb807cc1771cc98889089000f00770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070070888807bbccccbb98988088000f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000700000071bbbbbb188999889000400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000777777771111111188888888000400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000006006600600000800656565650000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000006006600600000500656565650000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000066666666000005006c6c6c6c0000000000000000
000000000000000000000070000007700000077000000700000007770000077000000777000007770000000066666666000005006c6c6c6c0000000000000000
00000000000000000000077000000007000000070000070700000700000007000000000700000707000000005555555500005500666666660000000000000000
00000000000000000000007000000070000000770000077700000070000007770000000700000777000000006cc66cc6000055006c6c6c6c0000000000000000
00000000000000000000007000000700000000070000000700000007000007070000000700000707000000006cc66cc6000055006c6c6c6c0000000000000000
00000000000000000000077700000777000007700000000700000770000007770000000700000777000000005555555500055500656565650000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000006666666600055500555555550000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000005555555500055500555555550000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000005555555500055500555555550000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000006cc66cc600555500555555550000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000006cc66cc600555500555555550000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000005555555505555500555555550000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000005555555505555555555555550000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000006666666655555555555555550000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000061000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000003000000000402000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
20202020202020202020202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000071000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000020202020202000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000003000000000402000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000002020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000
20202020202020202020202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000e2f29212020200000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000930000c2e0f0f09200000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000093e0f00000030000000000d2e1e1f1c100000012000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000093e1f193930300300300e2d2c2e2f2c200000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000b100b1b100039393930101d2d20100d200000000000000000000000000000000000000000000000000000000000000000000000000000000
00000081000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000b200b2b20003d1d1030301d2d20100d200000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000b293b2b29393d1d1030101d2d20100d200000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000003000000000402000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000b200b2b20000d1d1030100d2d20100d200000000000000000000000000000000000000000000000000000000000000000000000000000000
20202020202020202020202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000b2d2b2b2d2d2d1d1000000d2d20000d200000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000091000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000003000000000402000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
20202020202020202020202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020202
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002020202020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002
0000001200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002
0000000000000000000000000202020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002
0000000000000003030000000000000000000000000003000000000000000004000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000302
0202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202
0000000000000000190000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000400000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000001300000000000000000000000000000002020000000000000000000002020202000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000002000000000000000000000002000000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000300000000030000000303030300000002030303030303030303030303020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020202020202020202020202020202020202020202020202020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000001400000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000030000000004020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000001500000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000030000000004020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
